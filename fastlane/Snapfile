# Snapfile - Fastlane snapshot configuration for PeerDrop

# The scheme to use for screenshots
scheme("PeerDropUITests")

# Output directory
output_directory("./fastlane/screenshots")

# Devices (required for App Store)
devices([
  # iPhone (required: 6.9" and 6.7")
  "iPhone 17 Pro Max",  # 6.9" (required)
  "iPhone 17 Pro",      # 6.7" (required)
  # iPad (required: 12.9")
  "iPad Pro 13-inch (M5)"  # 12.9" (required)
])

# Languages to capture
languages([
  "en-US",
  "zh-Hant",
  "zh-Hans",
  "ja",
  "ko"
])

# Launch arguments to enable screenshot mode
launch_arguments(["-SCREENSHOT_MODE 1"])

# Override status bar for consistent screenshots
override_status_bar(true)

# Status bar style (light = white text, iOS 13+)
override_status_bar_arguments("--time '9:41' --dataNetwork 'wifi' --wifiMode 'active' --wifiBars 3 --cellularMode 'active' --cellularBars 4 --batteryState 'charged' --batteryLevel 100")

# Clear previous screenshots before capturing new ones
clear_previous_screenshots(true)

# Note: Not using test plan, just the scheme with only_testing

# Number of concurrent simulators
concurrent_simulators(true)

# Reinstall app before running
reinstall_app(false)

# Erase simulator before running
erase_simulator(false)

# Run tests headless
headless(true)

# Only run UI test classes for screenshots (Light + Dark mode)
only_testing([
  "PeerDropUITests/SnapshotTests",
  "PeerDropUITests/SnapshotTestsDark"
])
